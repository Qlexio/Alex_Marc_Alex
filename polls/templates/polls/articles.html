<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>    
    <script>
        $(document).ready(function()
        {
            // mettre à jour le script pour inclure en premier lieu le produit
            var $matiereC = $('#matiereC'),
                $matiereT = $('#matiereT'),
                $ref = $('#reference'),
                $typeR = $('#type_rivet'),
                // $diametreC = $('#diametre_corps'),
                // $longueur = $('#longueur_corps'),

                $optionsMatiereC = $ref.find('option');
                $matiereC.on('change', function()
                {
                    $ref.html($optionsMatiereC.filter('[value = "'+this.value + '"]'));
                }).trigger('change');

                // $optionsDiam = $diametreC.find('option');
                // $typeR.on('change2', function()
                // {
                //     $diametreC.html($optionsDiam.filter('[value = "'+this.value + '"]'));
                // }).trigger('change2');

                // $optionsLongC = $longueur.find('option');
                // $diametreC.on('change3', function()
                // {
                //     $longueur.html($optionsLongC.filter('[value = "'+this.value + '"]'));
                // }).trigger('change3');
        });
        
    </script>
</head>
<body>
    <form action="" id = "formTest" >
        {% csrf_token %}
    
        <select class="ui dropdown" id = "matiereC">
            <option selected disabled = "true">-Selectionnez le produit--</option>
            {% for mc in matiereC %}
                <option value= "{{mc.idMatiereCorps}}">{{mc.matiereCorps}}</option>
            {% endfor %}
        </select>
    
        <select class="ui dropdown" id = "matiereT">
            <option selected disabled = "true">-Selectionnez le produit--</option>
            {% for mt in matiereT %}
                <option value= "{{mt.idMatiereTige}}">{{mt.matiereTige}}</option>
            {% endfor %}
        </select>
    
        <!-- <select class="ui dropdown" id = "reference">
            <option selected disabled = "true">-Selectionnez le produit--</option>
            {% for ref in reference %}
                <option value= "{{ref.idReference}}">{{ref.libelle}}</option>
            {% endfor %}
        </select> -->
        
        <select class="ui dropdown" id = "type">
            <option selected disabled = "true">-Selectionnez le type--</option>
            {% for tp in type %}
                <option value= "{{tp.idType}}">{{tp.libelle}}</option>
            {% endfor %}
        </select>
    
        <select class="ui dropdown" id = "longueur_corps">
            <option selected disabled = "true">-Selectionnez la longueur--</option>
            {% for lc in longueurC %}
                <option value= "{{lc.idLongueurCorps}}">{{lc.longueurCorps}}</option>
            {% endfor %}
        </select>
        
        <select class="ui dropdown" id = "diametreC">
            <option selected disabled = "true">-Selectionnez le diamètre--</option>
            {% for dc in diametreC %}
                <option value= "{{dc.idDiametreCorps}}">{{dc.diametreCorps}}</option>
            {% endfor %}
        </select>
    
    </form>
    
</body>
</html>